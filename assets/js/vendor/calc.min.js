!function(win,doc){"use strict";function contentLoaded(e,t){var i=!1,n=!0,o=e.document,l=o.documentElement,r=o.addEventListener,a=r?"addEventListener":"attachEvent",s=r?"removeEventListener":"detachEvent",c=r?"":"on",u=function(n){("readystatechange"!=n.type||"complete"==o.readyState)&&(("load"==n.type?e:o)[s](c+n.type,u,!1),!i&&(i=!0)&&t.call(e,n.type||n))},m=function(){try{l.doScroll("left")}catch(e){return void setTimeout(m,50)}u("poll")};if("complete"==o.readyState)t.call(e,"lazy");else{if(!r&&l.doScroll){try{n=!e.frameElement}catch(d){}n&&m()}o[a](c+"DOMContentLoaded",u,!1),o[a](c+"readystatechange",u,!1),e[a](c+"load",u,!1)}}if(!doc.querySelectorAll)return!1;var EMPTY="",CALC_RULE="^(\\s*?[\\s\\S]*):(\\s*?[\\s\\S]*?((\\-(webkit|moz)\\-)?calc\\(([\\s\\S]+)\\))[\\s\\S]*)?$",CSSRULES="((\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",KEYFRAMES=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi"),FONTFACE=new RegExp("((@font-face\\s*?){([\\s\\S]*?)})","gi"),COMMENTS=new RegExp("(\\/\\*[\\s\\S]*?\\*\\/)","gi"),IMPORTS=new RegExp("@import .*?;","gi"),CHARSET=new RegExp("@charset .*?;","gi"),PERCENT=/[\d\.]+%/,PT=/\d+pt/,PIXEL=/(\d+)px/g,REMEM=/[\d\.]+r?em/,REM=/[\d\.]+rem/,EM=/[\d\.]+em/,MATH_EXP=/[\+\-\/\*]?[\d\.]+(px|%|em|rem)?/g,PLACEHOLDER="$1",ONLYNUMBERS=/[\s\-0-9]/g,FONTSIZE="font-size",ADDMEDIA="@media",onTextResize=[],onWindowResize=[],utilities={camelize:function(e){return e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})},trim:function(e){var t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;return String.prototype.trim?e.trim():e.replace(t,"")},indexOf:function(e,t,i){var n=e.length>>>0;for(i=Number(i)||0,i=0>i?Math.ceil(i):Math.floor(i),0>i&&(i+=n);n>i;i++)if(i in e&&e[i]===t)return i;return-1},getStyle:function(e,t){return e.currentStyle?e.currentStyle[utilities.camelize(t)]:doc.defaultView&&doc.defaultView.getComputedStyle?doc.defaultView.getComputedStyle(e,null).getPropertyValue(t):e.style[utilities.camelize(t)]},getFontsize:function(e){var t,i=doc.createElement("span");return i.innerHTML="&nbsp;",i.style.position="absolute",i.style.lineHeight="1em",i.style.fontSize="1em",e.appendChild(i),t=i.offsetHeight,e.removeChild(i),t},addEvent:function(e,t,i){doc.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i)},textResize:function(e){var t,i,n=function(){t=doc.createElement("span"),t.id="text-resize-control",t.innerHTML="&nbsp;",t.style.position="absolute",t.style.left="-9999px",t.style.lineHeight="1em",t.style.fontSize="1em",doc.body.insertBefore(t,doc.body.firstChild),i=t.offsetHeight},o=function(){var n=t.offsetHeight;return i===n?(win.requestAnimationFrame(o),!1):(i=n,e&&"function"==typeof e&&e(),void win.requestAnimationFrame(o))};n(),win.requestAnimationFrame(o)}},calcTest=function(){var e=document.createElement("div");return e.style.cssText="width: -moz-calc(10px); width: -webkit-calc(10px); width: calc(10px)",!!e.style.length},getStyleSheets=function(){for(var e,t=[],i=0,n=doc.styleSheets.length;n>i;i++)e=doc.styleSheets[i],e.href&&e.href!==EMPTY&&t.push(e.href);t.length>0&&loadStylesheets(t)},loadStylesheets=function(e){var t,i=0,n=e.length,o=[];if(win.XMLHttpRequest)t=new XMLHttpRequest;else try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(l){t=null}if(t)for(;n>i;i++)try{t.open("GET",e[i],!1),t.send(),200===t.status&&o.push(t.responseText)}catch(l){console.log("Error making request for file "+e[i]+": "+l.message)}o.length>0&&parseStylesheets(o)},parseStylesheets=function(e){for(var t=0,i=e.length;i>t;t++)e[t]=e[t].replace(COMMENTS,EMPTY).replace(CHARSET,EMPTY).replace(IMPORTS,EMPTY).replace(KEYFRAMES,EMPTY).replace(FONTFACE,EMPTY),dotheCalc(parseCSS(e[t]))},removeStyles=function(e){for(var t=0,i=e.length;i>t;t++)e[t].removeAttribute("style")},parseCSS=function(e,t){var i,n,o,l,r,a,s,c,u,m=[];for(t=t||"",o=new RegExp(CSSRULES,"gi");l=o.exec(e),null!==l;)if(r=utilities.trim((l[2]||l[5]).split("\r\n").join("\n")),-1!==r.indexOf(ADDMEDIA))a=l[3]+"\n}",m=m.concat(parseCSS(a,r.replace(ADDMEDIA,"")));else for(a=l[6].split("\r\n").join("\n").split(";"),i=0,n=a.length;n>i;i++){s=new RegExp(CALC_RULE,"gi").exec(a[i]);try{c=doc.querySelectorAll(r)}catch(d){console.log('Error trying to select "'+r+'": '+d.message);break}null!==s&&c.length&&(u={elements:c,media:t,values:utilities.trim(s[2]),formula:s[6],prop:utilities.trim(s[1]),placholder:utilities.trim(s[3])},u.formula.match(PERCENT)&&(u.onresize=!0),u.formula.match(REMEM)&&(u.ontextresize=!0),m.push(u))}return m},dotheCalc=function(calcRules){for(var index=0,len=calcRules.length,obj,calc=function(obj){for(var i=0,len=obj.elements.length,refValue,modifier,matches,l,j,result,formula;len>i;i++){for(formula=obj.formula.replace(PIXEL,PLACEHOLDER),matches=formula.match(MATH_EXP),l=matches.length,j=0;l>j;j++)modifier=null,matches[j].match(PERCENT)&&(refValue=obj.elements[i].parentNode.clientWidth,modifier=parseFloat(matches[j],10)/100),matches[j].match(EM)&&(refValue=obj.elements[i].currentStyle?utilities.getFontsize(obj.elements[i]):parseInt(utilities.getStyle(obj.elements[i],FONTSIZE).replace(/px/,EMPTY),10),refValue.match&&refValue.match(PT)&&(refValue=Math.round(1.333333333*parseInt(refValue.replace(/pt/,""),10))),modifier=parseFloat(matches[j],10)),matches[j].match(REM)&&(refValue=utilities.getStyle(doc.body,FONTSIZE).match(PERCENT)?16*parseInt(utilities.getStyle(doc.body,FONTSIZE).replace(/%/,EMPTY),10)/100:utilities.getStyle(doc.body,FONTSIZE).match(PT)?Math.round(1.333333333*parseInt(utilities.getStyle(doc.body,FONTSIZE).replace(/pt/,""),10)):parseInt(utilities.getStyle(doc.body,FONTSIZE).replace(/px/,EMPTY),10),modifier=parseFloat(matches[j],10)),modifier&&(formula=formula.replace(matches[j],refValue*modifier));try{formula.match(ONLYNUMBERS)&&(result=eval(formula),obj.elements[i].style[utilities.trim(utilities.camelize(obj.prop))]=obj.values.replace(obj.placholder,result+"px"))}catch(e){}}};len>index;index++)obj=calcRules[index],obj.onresize&&-1===utilities.indexOf(onWindowResize,obj)&&onWindowResize.push(obj),obj.ontextresize&&-1===utilities.indexOf(onTextResize,obj)&&onTextResize.push(obj),obj.media!==EMPTY?win.matchMedia&&win.matchMedia(obj.media).matches?calc(obj):removeStyles(obj.elements):calc(obj)};contentLoaded(win,function(){calcTest()||(getStyleSheets(),onTextResize.length>0&&utilities.textResize(function(){dotheCalc(onTextResize)}),onWindowResize.length>0&&utilities.addEvent(win,"resize",function(){dotheCalc(onWindowResize)}))}),function(){for(var e=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!win.requestAnimationFrame;++i)win.requestAnimationFrame=win[t[i]+"RequestAnimationFrame"],win.cancelAnimationFrame=win[t[i]+"CancelAnimationFrame"]||win[t[i]+"CancelRequestAnimationFrame"];win.requestAnimationFrame||(win.requestAnimationFrame=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-e)),o=win.setTimeout(function(){t(i+n)},n);return e=i+n,o}),win.cancelAnimationFrame||(win.cancelAnimationFrame=function(e){clearTimeout(e)})}()}(window,document);
//# sourceMappingURL=calc.min.js.map
